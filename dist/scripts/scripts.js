function mustache(a,b,c,d){function e(a,b){return b=b.pop?b:b.split("."),a=a[b.shift()]||"",0 in b?e(a,b):a}var f=mustache,g="";b=Array.isArray(b)?b:b?[b]:[],b=d?0 in b?[]:[1]:b;for(d=0;d<b.length;d++){var h,i="",j=0,k="object"==typeof b[d]?b[d]:{};k.prototype=c,k[""]={"":b[d]},a.replace(/([\s\S]*?)({{((\/)|(\^)|#)(.*?)}}|$)/g,function(a,b,c,d,l,m,n){j?i+=j&&!l||1<j?a:b:(g+=b.replace(/{{{(.*?)}}}|{{(!?)(&?)(>?)(.*?)}}/g,function(a,b,c,d,g,h){return b?e(k,b):d?e(k,h):g?f(e(k,h),k):c?"":new Option(e(k,h)).innerHTML}),h=m),l?--j||(n=e(k,n),g=/^f/.test(typeof n)?g+n.call(k,i,function(a){return f(a,k)}):g+f(i,n,k,h),i=""):++j})}return g}!function(){function a(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c}a.prototype=window.Event.prototype,window.CustomEvent=a}(),function(a){function b(a,b){var c=document.querySelector("section#"+a);if(0==c.length)return void console.warn("section with id=%s not found!",a);var d=e[a];if(d){var i=c.length>0?c[0]:null,j=d.call(i,b);"function"==typeof j&&(h(c,"[no-ctl-cache]")||(e[a]=j),j.call(i,b))}f&&(document.body.classList.remove(f),g&&(document.dispatchEvent(new CustomEvent("page.hidden",{currentPage:f})),g.getAttribute("src")&&h(g,"[no-ctl-cache]")&&(g.innerHTML=null))),document.body.classList.add(f=a),(g=c)&&document.dispatchEvent(new CustomEvent("page.shown",{currentPage:f}))}function c(a,d){var e=document.body.querySelector("section#"+a),f=e.getAttribute("src");f&&!e.hasChildNodes()?c.get(f,e,a,d):b(a,d)}function d(){var a=location.hash||"#"+document.querySelector("section[default]").getAttribute("id"),b=/#([-0-9A-Za-z]+)(\:(.+))?/,d=b.exec(a);a=d[1];var e=d[3];c(a,e)}var e={},f=null,g=null,h=function(a,b){return(a.matches||a.matchesSelector||a.msMatchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.oMatchesSelector).call(a,b)};c.page=function(a,b){e[a]=b},c.get=function(a,c,d,e){var f=new XMLHttpRequest;f.open("GET",a,!0),f.onload=function(){f.status>=200&&f.status<400?(c.innerHTML=f.responseText,b(d,e)):console.warn("failed to get %s page!",d)},f.onerror=function(){console.warn("failed to get %s page!",d)},f.send()},c.start=function(){a.dispatchEvent(new CustomEvent("hashchange"))},a.addEventListener("hashchange",d),a.app=c}(this),function(a){function b(){console.log(f[0]);var a=JSON.stringify(f,["id","name"]);localStorage.setItem(e,a)}function c(){var a=localStorage.getItem(e);return JSON.parse(a)}function d(){console.log("TeamRepo called")}var e="peoples",f=c()||[];d.findAll=function(){return f},d.findById=function(a){for(var b=null,c=0;c<f.length;c++)if(f[c].id===a){b=f[c];break}return b},d.remove=function(a){for(var c=0;c<f.length;c++)if(f[c].id===a){f.splice(c,1);break}b()},d.save=function(a){if("undefined"==typeof a.id){var c=1;if(f.length>0){var e=f[f.length-1];"undefined"!=typeof e.id&&(c=e.id+1)}a.id=c,f.push(a)}else{var a=d.findById(a.id);a&&(a.name=a.name)}b()},a.TeamRepository=d}(this),app.alert=function(a,b){var c="."+a,d=document.querySelector(c),e=d.querySelector(".alert-msg");e.innerHTML=b,d.style.display="block"},app.page("team-list",function(){var a=document.querySelector("ul.teamlist"),b=a.innerHTML;return function(c){console.log("kikou");var d=TeamRepository.findAll(),e=mustache(b,{list:d});a.innerHTML=e}}),app.page("home",function(){var a=document.getElementById("home"),b=a.querySelector("#nb"),c=a.querySelector("#gen_teams"),d=a.querySelector("#gen_members"),e=a.querySelector("#teams-result"),f=e.innerHTML,g=null,h=function(){var a=TeamRepository.findAll();if(0!=a.length){for(var c,d,e=a.map(function(a,b){return b}),f=parseInt(b.value),g=[f],h=Math.min(f,a.length),i={name:"Hall of fame:"},k=0;k<h;k++)d=Math.floor(Math.random()*e.length),c=e.splice(d,1),g[k]=a[c];i.members=g,j([i],"Hall of fame:")}},i=function(){var a=TeamRepository.findAll();if(0!=a.length){var c=a.map(function(a,b){return b}),d=parseInt(b.value),e=Math.floor(a.length/d);console.log("nbPers:"+d+" - nbTeam:"+e);for(var f,g,h=[],i=0;i<e;i++){for(var k={name:"Team "+i+":"},l=[d],m=0;m<d;m++)g=Math.floor(Math.random()*c.length),f=c.splice(g,1),l[m]=a[f];k.members=l,h[i]=k}if(c.length>0){var l=c.map(function(b,c){return a[b]}),k={name:"Team Orphan(s)",members:l};h.push(k)}j(h)}},j=function(a){var b=mustache(f,{list:a});g=a,e.innerHTML=b};return e.innerHTML=null,c.onclick=i,d.onclick=h,b.onchange=function(){c.checked?i():d.checked&&h()},function(a){console.log("kikou");var b=TeamRepository.findAll();0==b.length&&app.alert("alert-info",'hello, no members found, you can add members by clicking on the "Team List" menu')}}),app.page("team-member-details",function(){var a=document.querySelector("#team-member-details form"),b=a.querySelector('[name="id"]'),c=a.querySelector('[name="name"]'),d=a.querySelector('input[name="update-member"]'),e=a.querySelector('input[name="remove-member"]');return d.onclick=function(a){a.preventDefault();var d=TeamRepository.findById(parseInt(b.value));d.name=c.value,TeamRepository.save(d),history.back()},e.onclick=function(a){a.preventDefault();var d=window.confirm("are you sure you want to remove "+c.value);d&&(TeamRepository.remove(parseInt(b.value)),history.back())},function(a){var d=parseInt(a),e=TeamRepository.findById(d);b.value=e.id,c.value=e.name}}),app.page("team-add",function(){var a=document.querySelector('form input[name="member-name"]'),b=document.querySelector('form input[name="add-member"]');return b.onclick=function(b){b.preventDefault(),a.value.length>0&&(TeamRepository.save({name:a.value}),history.back())},function(a){}}),app.page("archive-save",function(){var a,b=document.querySelector("#archive-save form"),c=b.querySelector("name"),d=b.querySelector("description"),e=b.querySelector(".button");return e.onclick=function(){var a={name:c.value,description:d.value,output:currentOutput};TeamRepository.archiveSave(a)},function(b){a=b,console.log(b)}});