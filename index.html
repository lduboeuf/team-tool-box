<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Team Tool Box</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- build:js scripts/vendors.js -->
    <script src="scripts/vendors/remotestorage.min.js"></script>
    <script src="scripts/vendors/doT.min.js"></script>
    <!-- endbuild -->

    <!-- build:js scripts/scripts.js -->
    <script src="scripts/remotestorage-ttb-teams.js"></script>
    <script src="scripts/remotestorage-ttb-archives.js"></script>
    <script type="text/javascript" src="scripts/spapp.js"></script>

    <script type="text/javascript" src="scripts/app-utils.js"></script>

    <script type="text/javascript" src="scripts/team-list.js"></script>
    <script type="text/javascript" src="scripts/team-list-details.js"></script>
    <script type="text/javascript" src="scripts/home.js"></script>
    <script type="text/javascript" src="scripts/team-member-details.js"></script>
    <script type="text/javascript" src="scripts/team-member-add.js"></script>
    <script type="text/javascript" src="scripts/team-add.js"></script>
    <script type="text/javascript" src="scripts/archive-save.js"></script>
    <script type="text/javascript" src="scripts/archive-list.js"></script>
    <script type="text/javascript" src="scripts/archive-details.js"></script>
    <!-- endbuild -->
    <!-- build:css styles/main.css -->
    <link rel="stylesheet" href="styles/app.css">
    <!-- endbuild -->
  </head>
<body>
  <!--[if lt IE 10]> <p class="browserupgrade"><strong>Ohlala, so sorry!</strong>, developping apps for old browser is so painfull and time consuming that i choosed not to support them ... Please <a href="http://browsehappy.com/">upgrade your browser</a> .</p> <![endif]-->
  <header>
    <div class="brand">
      <a href="#home">Team Tool Box</a>
      <span>Build your teams randomly!</span>
    </div>

    <ul class="topnav" id="menu">
    <li><a href="#home">Home</a></li>
     <li><a href="#team-list">Team List</a></li>
     <li><a href="#archive-list">Archives</a></li>
     <li><a href="#about">About</a></li>
     <li class="icon">
       <a href="javascript:void(0);" onclick="menuHandler()">&#9776;</a>
     </li>
   </ul>
 </header>

  <section id="home" default>
    <div>
      <header>
      <form>

        <label for="nb">find:</label><br/>
          <select id="nb">
              <option value="1">1</option>
              <option value="2" selected="selected">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
              <option value="6">6</option>
              <option value="7">7</option>
              <option value="8">8</option>
          </select>
          <div class="radio-group">
            <input type="radio" name="opt" id="gen_teams" checked="checked"/>
            <label for="gen_teams">members/team</label>
            <input type="radio" name="opt" id="gen_members"/>
            <label for="gen_members">members</label>
          </div>
          <label for="team-list">within:</label>
          <select class="team-list" name="team-list">
            <option value="-1">--all teams--</option>
            {{ for(var prop in it) { }}

              <option value="{{=it[prop].id}}">{{=it[prop].name}}</option>
            {{ } }}

          </select>
          <input type="submit" name="ok" value="generate" class="button btn-default"/>


      </form>
    </header>
      <div id="teams-result">
        {{~it :team:idx}}
        <div class="team">
          <h3>{{=team.name}}</h3>
          <ul class="teams" >
            {{~team.members :member:idxm}}
              <li>{{=member.name}}</li>
            {{~}}
          </ul>
        </div>
        {{~}}
        <div>
          <button class="btn-success">save</button>
        </div>
      </div>
    </div>
  </section>
  <section id="team-list" src="templates/team-list.html"></section>
  <section id="team-list-details" src="templates/team-list-details.html"></section>
  <section id="team-add" src="templates/team-add.html"></section>
  <section id="team-member-add" src="templates/team-member-add.html"></section>
  <section id="team-member-details" src="templates/team-member-details.html"></section>
  <section id="about" src="templates/about.html"></section>
  <section id="archive-save" src="templates/archive-save.html"></section>
  <section id="archive-list" src="templates/archive-list.html"></section>
  <section id="archive-details" src="templates/archive-details.html"></section>
  <section id="sync" src="templates/sync.html"></section>
  <div class="alert-info">
    <span onclick="this.parentElement.style.display='none'" class="alert-closebtn">&times;</span>
    <p class="alert-msg"></p>
  </div>
  <script>
    var menu = document.getElementById("menu");
    var links = document.querySelectorAll('header ul li a');


    function menuHandler() {
        if (menu.className === "topnav") {
            menu.className += " responsive";
        } else {
            menu.className = "topnav";
        }
    }

    //handle click on nav a, make it selected style
    function setSelected(){
      /*
      for(i=0;i<links.length;i++) {
        links[i].classList.remove('selected');
      }
      this.classList.add('selected');
      */
      //toggle menu when a menu item is clicked
      if (this.parentNode.className!=='icon'){
        menu.className = "topnav";
      }

      //make sure every alert box is hidden
      document.querySelector('.alert-info').style.display = 'none';

    }

    for(i=0;i<links.length;i++) {
      links[i].addEventListener('click',setSelected);
    }
    document.querySelector('div.brand a').onclick = setSelected;


    app.start();

    //remotestorage
    remoteStorage.access.claim('teams', 'rw');
    remoteStorage.access.claim('archives', 'rw');
    

    remoteStorage.displayWidget();
  </script>
</body>
</html>
