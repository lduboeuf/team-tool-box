!function(){function a(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c}a.prototype=window.Event.prototype,window.CustomEvent=a}(),function(a){function b(a,b){var c=document.querySelector("section#"+a);if(0==c.length)return void console.warn("section with id=%s not found!",a);var d=e[a];if(d){var i=c.length>0?c[0]:null,j=d.call(i,b);"function"==typeof j&&(h(c,"[no-ctl-cache]")||(e[a]=j),j.call(i,b))}f&&(document.body.classList.remove(f),g&&(document.dispatchEvent(new CustomEvent("page.hidden",{currentPage:f})),g.getAttribute("src")&&h(g,"[no-ctl-cache]")&&(g.innerHTML=null))),document.body.classList.add(f=a),(g=c)&&document.dispatchEvent(new CustomEvent("page.shown",{currentPage:f}))}function c(a,d){var e=document.body.querySelector("section#"+a),f=e.getAttribute("src");f&&!e.hasChildNodes()?c.get(f,e,a,d):b(a,d)}function d(){var a=location.hash||"#"+document.querySelector("section[default]").getAttribute("id"),b=/#([-0-9A-Za-z]+)(\:(.+))?/,d=b.exec(a);a=d[1];var e=d[3];c(a,e)}var e={},f=null,g=null,h=function(a,b){return(a.matches||a.matchesSelector||a.msMatchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.oMatchesSelector).call(a,b)};c.page=function(a,b){e[a]=b},c.get=function(a,c,d,e){var f=new XMLHttpRequest;f.open("GET",a,!0),f.onload=function(){f.status>=200&&f.status<400?(c.innerHTML=f.responseText,b(d,e)):console.warn("failed to get %s page!",d)},f.onerror=function(){console.warn("failed to get %s page!",d)},f.send()},c.start=function(){a.dispatchEvent(new CustomEvent("hashchange"))},a.addEventListener("hashchange",d),a.app=c}(this),function(a){function b(){console.log(f[0]);var a=JSON.stringify(f,["id","name"]);localStorage.setItem(e,a)}function c(){var a=localStorage.getItem(e);return JSON.parse(a)}function d(){console.log("TeamRepo called")}var e="peoples",f=c()||[];d.findAll=function(){return f},d.findById=function(a){for(var b=null,c=0;c<f.length;c++)if(f[c].id===a){b=f[c];break}return b},d.remove=function(a){for(var c=0;c<f.length;c++)if(f[c].id===a){f.splice(c,1);break}b()},d.save=function(a){if("undefined"==typeof a.id){var c=1;if(f.length>0){var e=f[f.length-1];"undefined"!=typeof e.id&&(c=e.id+1)}a.id=c,f.push(a)}else{var a=d.findById(a.id);a&&(a.name=a.name)}b()},a.TeamRepository=d}(this),app.alert=function(a,b){var c="."+a,d=document.querySelector(c),e=d.querySelector(".alert-msg");e.innerHTML=b,d.style.display="block"},app.page("team-list",function(){var a=document.querySelector("ul.teamlist"),b=a.innerHTML;return function(c){console.log("kikou");var d=TeamRepository.findAll(),e=mustache(b,{list:d});a.innerHTML=e}}),app.page("home",function(){var a=document.getElementById("teams-result"),b=document.getElementById("nb"),c=(document.querySelector("#home button"),a.innerHTML),d=null,e=function(){var a=TeamRepository.findAll(),c=a.map(function(a,b){return b}),d=b.value;if(0!==d.length){for(var e,f,h=[d],i=Math.min(d,a.length),j={name:"Hall of fame:"},k=0;k<i;k++)f=Math.floor(Math.random()*c.length),e=c.splice(f,1),h[k]=a[e];j.members=h,g([j],"Hall of fame:")}},f=function(){var a=TeamRepository.findAll(),c=a.map(function(a,b){return b}),d=b.value;if(0!==d.length){var e=Math.floor(a.length/d);console.log("nbPers:"+d+" - nbTeam:"+e);for(var f,h,i=[e],j=0;j<e;j++){for(var k={name:"Team "+j+":"},l=[d],m=0;m<d;m++)h=Math.floor(Math.random()*c.length),f=c.splice(h,1),l[m]=a[f];k.members=l,i[j]=k}if(c.length>0){var l=c.map(function(b,c){return a[b]}),k={name:"Team Orphan(s)",members:l};i.push(k)}g(i)}},g=function(b){var e=mustache(c,{list:b});d=b,a.innerHTML=e};a.innerHTML=null;var h=document.getElementById("gen_teams");h.onclick=f;var i=document.getElementById("gen_members");return i.onclick=e,b.onchange=function(){h.checked?f():i.checked&&e()},function(a){console.log("kikou");var b=TeamRepository.findAll();0==b.length&&app.alert("alert-info",'no members found, you can add members by clicking on the "Team List" menu')}}),app.page("team-member-details",function(){var a=document.querySelector("#team-member-details form"),b=a.querySelector('[name="id"]'),c=a.querySelector('[name="name"]'),d=a.querySelector('input[name="update-member"]'),e=a.querySelector('input[name="remove-member"]');return d.onclick=function(a){a.preventDefault();var d=TeamRepository.findById(parseInt(b.value));d.name=c.value,TeamRepository.save(d),history.pushState(null,null,"#team-list"),app("team-list")},e.onclick=function(a){a.preventDefault(),TeamRepository.remove(parseInt(b.value)),history.pushState(null,null,"#team-list"),app("team-list")},function(a){var d=parseInt(a),e=TeamRepository.findById(d);b.value=e.id,c.value=e.name}}),app.page("team-add",function(){var a=document.querySelector('form input[name="member-name"]'),b=document.querySelector('form input[name="add-member"]');return b.onclick=function(b){b.preventDefault(),a.value.length>0&&(TeamRepository.save({name:a.value}),history.pushState(null,null,"#team-list"),app("team-list"))},function(a){}}),app.page("archive-save",function(){return function(a){}});